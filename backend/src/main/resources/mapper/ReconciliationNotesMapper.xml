<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="riconciliazionetitoli.mapper.ReconciliationNotesMapper">

	<select id="selectByIsinAndPortfolioId" resultType="riconciliazionetitoli.model.ReconciliationNotesModel">
		SELECT
		id as id,
		isin as isin,
		portfolio_id as portfolioId,
		is_validated as isValidated,
		note as note,
		validated_by as validatedBy,
		validation_date as validationDate
		FROM reconciliation_notes
		WHERE isin = #{isin}
		AND portfolio_id = #{portfolioId}
    </select>
    
    <update id="update" parameterType="riconciliazionetitoli.model.ReconciliationNotesModel">
      UPDATE reconciliation_notes
      SET
          is_validated = #{isValidated},
          note = #{note},
          validated_by = #{validatedBy},
          validation_date = #{validationDate}
      WHERE isin = #{isin}
		AND portfolio_id = #{portfolioId}
    </update>

</mapper>